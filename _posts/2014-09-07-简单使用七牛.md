---
layout: post
title: 简单使用七牛
category: experience
---

其实在去年就注册了七牛，但是当时仅仅是为了查看一下这家云存储的文档，这几天机缘巧合，用了一下七牛，觉得还挺好的。所以记录下来，以备后用。

七牛目前有两种用户类型:

![](http://writehappy.qiniudn.com/img%2F%E4%B8%83%E7%89%9B%E4%B8%A4%E7%A7%8D%E7%94%A8%E6%88%B7%E7%B1%BB%E5%9E%8B.png)

建议你完善自己的资料，成为标准用户。

创建空间,这个很简单，就是创建Bucket。(空间就是远程端的文件夹)

为了使用云存储，很多平台都使用了类似于sync的工具。七牛的一个工具，也是我常用的一个工具叫qrsync，从[这里]可以找到它。

然后配置一下config文件，比如：

![](http://writehappy.qiniudn.com/img%2Fqiniu_config.png)

其中src就是你本地的文件夹根目录，你可以用文件夹层级来控制具体的文件的url路径。

比如src是/data，本地文件是/data/`img`/a.png，那么用qrsync同步到云端之后，a.png的url就是 你的空间.qiniudn.com/`img`%2Fa.png  其中`%2F`是`/` urlencode之后的样子。

这样你就可以用路径管理文件，比如图片文件都放到`img`下，或者2014年的文件都放到`2014`这个文件夹下。

其中<code>key_prefix</code>是文件前缀，<code>threshold</code>是文件上传的buffer阈值，我都没有过多理会这两个参数，默认其实就足够一般用户的使用情况。

当配置好你的qrsync对应的config文件并且准备好你本地的source文件之后，你可以用qrsync进行同步了。

![](http://writehappy.qiniudn.com/img%2Fqrsync.png)


## 可能会遇到的问题 ##
=== 如果upload了一个文件，发现它不是自己想要的，在本地修改了source文件之后，重新qrsync同步之后却发现<code>all things updated</code>。这时候怎么办? ===

聪明的你肯定能猜到qrsync肯定在哪里做了log，根据log记录来区分哪些本地source文件同步到了云端，哪些没有。对了，这个log文件就在当前用户家目录的.qrsync里面

那么把这个.qrsync清空，然后在重新同步一下就没有问题喽。

### 同步好了之后，我怎么知道具体的url路径呢? ###

你的空间.qiniudn.com/文件名urlencode



[这里]: http://developer.qiniu.com/download/index.html#tools

