---
layout: post
title: 用命令的方式进行svn分支的merge
category: experience
---

和大多数的版本管理工具一样，svn有分支的概念。

当分支开发到一个milestone的时候，就需要从当前的分支merge代码到主干。

几年前还用svn的界面操作进行。

比如：

![](http://writehappy.qiniudn.com/img/svn_merge1.png)

![](http://writehappy.qiniudn.com/img/svn_merge2.png)

这里面有三种merge的方法，

<h2>第一种：Merge a range of revisions</h2>

This method covers the case when you have made one or more revisions to a branch(or to the trunk) and you want to port those change across to a different branch.

这个是说，可以把分支或主干的某个版本或某些版本都merge到主干或分支。

一般情况用不到，因为涉及到分支下细粒度到版本合并到主干或分支。

![](http://writehappy.qiniudn.com/img/svn_merge3.png)

之后就下一步、netxt即可。

<h2>第二种：Reintegrate a branch</h2>

This method covers the case when you have made a feature branch as discussed in the Subversion book. Use this to merge all changes of branch back to trunk.

这个简单说就是将某一个分支merge回trunk，非常好理解吧。

还有就是当分支merge回trunk之后理论上可以将分支删除了。

<h2>第三种：Merge two different trees</h2>

This method covers the case when you want to merge the differences of two different branches into your working copy.

这个是说，merge两个不同的分支tree。可以从分支merge到主干，可以从主干merge到分支，可以从分支merge到分支。

![](http://writehappy.qiniudn.com/img/svn_merge4.png)

<h2>这三种merge的方法有什么区别呢？</h2>

第一种方法：

<li>可以从分支merge到主干，可以从主干merge到分支，可以从分支merge到分支。</li>

<li>可以选择分支下面的版本，当然主干的话是不能选择版本的，就是head reverion。</li>

第二种方法：

<li>只能从分支到主干</li>

<li>分支和主干都不能选择具体的版本，都是head reversion。</li>

第三种方法：

<li>可以从分支merge到主干，可以从主干merge到分支，可以从分支merge到分支。</li>

<li>无论是分支还是主干都可以选择合并的版本。</li>

废话说了这么多，其实这些都几乎很少用到了。现在用的比较多的是命令的方式进行merge。

	#第一步：将本地开发环境切换到开发分支/主干上 （确定当前路径是主干还是某个分支，决定了destination，非常重要）
	svn switch https://svn.domain.com/project/BRANCH1
	#第二步：将待合并的tag合并到本地工作副本
	svn merge https://svn.domain.com/tags/project/BRANCH2
	#第三步：解决冲突，并提交
	svn ci -m "your comments"
	#第四步：标记合并tag
	svn cp https://svn.domain.com/project/BRANCH1 https://svn.domain.com/tags/project/BRANCH2_MERGE_BRANCH1 -m "BRANCH2_MERGE_BRANCH1"




